var CodeMirror=(function(){function y(O,aO){var aX={},aJ=y.defaults;for(var bc in aJ){if(aJ.hasOwnProperty(bc)){aX[bc]=(aO&&aO.hasOwnProperty(bc)?aO:aJ)[bc];}}var ba=document.createElement("div");ba.className="CodeMirror";ba.innerHTML='<div style="position: relative"><pre style="position: relative; height: 0; visibility: hidden; overflow: hidden;"><span>xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span></pre><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div style="overflow: hidden; position: absolute; width: 0; left: 0"><textarea style="height: 1px; position: absolute; width: 1px;" wrap="off"></textarea></div><div class="CodeMirror-lines"><div style="position: relative"><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div>';if(O.appendChild){O.appendChild(ba);}else{O(ba);}var aw=ba.firstChild,ao=aw.firstChild,a6=ao.nextSibling,aE=a6.firstChild,bA=aE.firstChild,bE=aE.nextSibling,bC=bE.firstChild,az=bE.nextSibling.firstChild,W=az.firstChild,Z=W.nextSibling;if(aX.tabindex!=null){bC.tabindex=aX.tabindex;}if(!aX.gutter&&!aX.lineNumbers){aE.style.display="none";}var ay=new l(),ai=new l(),Y;var aZ,bw=[new z("")],aS,aP=new c(),i;a8();var aF={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false};var aR,bh;var a4,bu,aA,ae,bs;var a1=0,bf=0,bm=0,aD=null;var P,bl;bx(function(){ab(aX.value||"");a4=false;})();setTimeout(au,20);e(ba,"mousedown",bx(aj));if(!o){e(ba,"contextmenu",bx(ag));}e(aw,"dblclick",bx(a0));e(ba,"scroll",function(){X([]);if(aX.onScroll){aX.onScroll(bt);}});e(window,"resize",function(){X(true);});e(bC,"keyup",bx(a5));e(bC,"keydown",bx(am));e(bC,"keypress",bx(aV));e(bC,"focus",av);e(bC,"blur",at);e(ba,"dragenter",function(bH){bH.stop();});e(ba,"dragover",function(bH){bH.stop();});e(ba,"drop",bx(ad));e(ba,"paste",function(){bC.focus();br();});e(bC,"paste",function(){br();});e(bC,"cut",function(){br();});if(document.activeElement==bC){av();}else{at();}function I(bH){return bH>=0&&bH<bw.length;}var bt={getValue:aY,setValue:bx(ab),getSelection:bo,replaceSelection:bx(ac),focus:function(){bC.focus();av();br();},setOption:function(bH,bI){aX[bH]=bI;if(bH=="lineNumbers"||bH=="gutter"){K();}else{if(bH=="mode"||bH=="indentUnit"){a8();}}},getOption:function(bH){return aX[bH];},undo:bx(bj),redo:bx(bF),indentLine:bx(function(bH){if(I(bH)){al(bH,"smart");}}),historySize:function(){return{undo:aP.done.length,redo:aP.undone.length};},matchBrackets:bx(function(){ak(true);}),getTokenAt:function(bH){bH=aa(bH);return bw[bH.line].getTokenAt(aZ,ax(bH.line),bH.ch);},cursorCoords:function(bH){if(bH==null){bH=aF.inverted;}return bd(bH?aF.from:aF.to);},charCoords:function(bH){return bd(aa(bH));},coordsChar:function(bI){var bJ=A(az);var bH=Math.min(bf-1,a1+Math.floor(bI.y/bv()));return aa({line:bH,ch:aW(aL(bH),bI.x)});},getSearchCursor:function(bI,bJ,bH){return new ap(bI,bJ,bH);},markText:bx(function(bI,bH,bJ){return bx(N(bI,bH,bJ));}),setMarker:af,clearMarker:V,setLineClass:bx(aC),lineInfo:T,addWidget:function(bJ,bI,bH){var bJ=be(aa(bJ),true);bI.style.top=(a1*bv()+bJ.yBot+aT())+"px";bI.style.left=(bJ.x+a7())+"px";aw.appendChild(bI);if(bH){bG(bJ.x,bJ.yBot,bJ.x+bI.offsetWidth,bJ.yBot+bI.offsetHeight);}},lineCount:function(){return bw.length;},getCursor:function(bH){if(bH==null){bH=aF.inverted;}return q(bH?aF.from:aF.to);},somethingSelected:function(){return !n(aF.from,aF.to);},setCursor:bx(function(bH,bI){if(bI==null&&typeof bH.line=="number"){aH(bH.line,bH.ch);}else{aH(bH,bI);}}),setSelection:bx(function(bI,bH){bg(aa(bI),aa(bH||bI));}),getLine:function(bH){if(I(bH)){return bw[bH].text;}},setLine:bx(function(bH,bI){if(I(bH)){a9(bI,{line:bH,ch:0},{line:bH,ch:bw[bH].text.length});}}),removeLine:bx(function(bH){if(I(bH)){a9("",{line:bH,ch:0},aa({line:bH+1,ch:0}));}}),replaceRange:bx(a9),getRange:function(bI,bH){return aU(aa(bI),aa(bH));},operation:function(bH){return bx(bH)();},refresh:function(){X(true);},getInputField:function(){return bC;},getWrapperElement:function(){return ba;}};function ab(bH){aP=null;var bI={line:0,ch:0};a3(bI,{line:bw.length-1,ch:bw[bw.length-1].text.length},v(bH),bI,bI);aP=new c();}function aY(bJ){var bK=[];for(var bI=0,bH=bw.length;bI<bH;++bI){bK.push(bw[bI].text);}return bK.join("\n");}function aj(bN){for(var bJ=bN.target();bJ!=ba;bJ=bJ.parentNode){if(bJ.parentNode==bA){if(aX.onGutterClick){aX.onGutterClick(bt,d(bA.childNodes,bJ)+a1);}return bN.stop();}}if(o&&bN.button()==3){ag(bN);}if(bN.button()!=1){return;}var bH=U(bN),bP=bH,bI;if(!bH){if(bN.target()==ba){bN.stop();}return;}aH(bH.line,bH.ch,false);if(!i){av();}bN.stop();function bL(){bC.focus();a4=true;bK();bM();}function bO(bQ){var bS=U(bQ,true);if(bS&&!n(bS,bP)){if(!i){av();}bP=bS;bg(bH,bS);a4=false;var bR=by();if(bS.line>=bR.to||bS.line<bR.from){bI=setTimeout(bx(function(){bO(bQ);}),150);}}}var bK=e(document,"mousemove",bx(function(bQ){clearTimeout(bI);bQ.stop();bO(bQ);}),true);var bM=e(document,"mouseup",bx(function(bQ){clearTimeout(bI);var bR=U(bQ);if(bR){bg(bH,bR);}bQ.stop();bL();}),true);}function a0(bH){var bI=U(bH);if(!bI){return;}a2(bI);bH.stop();}function ad(bL){var bO=U(bL,true),bI=bL.e.dataTransfer.files;if(!bO||aX.readOnly){return;}if(bI&&bI.length&&window.FileReader&&window.File){var bN=bI.length,bM=Array(bN),bJ=0;for(var bH=0;bH<bN;++bH){bK(bI[bH],bH);}function bK(bR,bQ){var bP=new FileReader;bP.onload=function(){bM[bQ]=bP.result;if(++bJ==bN){a9(bM.join(""),aa(bO),aa(bO));}};bP.readAsText(bR);}}else{try{var bM=bL.e.dataTransfer.getData("Text");if(bM){a9(bM,bO,bO);}}catch(bL){}}}function am(bL){if(!i){av();}var bK=bL.e.keyCode;var bJ=(j?bL.e.metaKey:bL.e.ctrlKey)&&!bL.e.altKey,bI=bL.e.ctrlKey||bL.e.altKey||bL.e.metaKey;if(bK==16||bL.e.shiftKey){aR=aR||(aF.inverted?aF.to:aF.from);}else{aR=null;}if(aX.onKeyEvent&&aX.onKeyEvent(bt,s(bL.e))){return;}if(bK==33||bK==34){bp(bK==34);return bL.stop();}if(bJ&&(bK==36||bK==35)){bz(bK==36);return bL.stop();}if(bJ&&bK==65){bb();return bL.stop();}if(!aX.readOnly){if(!bI&&bK==13){return;}if(!bI&&bK==9&&aq(bL.e.shiftKey)){return bL.stop();}if(bJ&&bK==90){bj();return bL.stop();}if(bJ&&((bL.e.shiftKey&&bK==90)||bK==89)){bF();return bL.stop();}}aD=(bJ?"c":"")+bK;if(aF.inverted&&t.hasOwnProperty(aD)){var bH=G(bC);if(bH){bh={anchor:bH.start};f(bC,bH.start,bH.start);}}br(aD);}function a5(bH){if(bh){bh=null;a4=true;}if(bH.e.keyCode==16){aR=null;}}function aV(bJ){if(aX.onKeyEvent&&aX.onKeyEvent(bt,s(bJ.e))){return;}if(aX.electricChars&&aZ.electricChars){var bH=String.fromCharCode(bJ.e.charCode==null?bJ.e.keyCode:bJ.e.charCode);if(aZ.electricChars.indexOf(bH)>-1){setTimeout(bx(function(){al(aF.to.line,"smart");}),50);}}var bI=bJ.e.keyCode;if(bI==13){ar();bJ.stop();}else{if(bI==9&&aX.tabMode!="default"){bJ.stop();}else{br(aD);}}}function av(){if(!i&&aX.onFocus){aX.onFocus(bt);}i=true;bi();if(ba.className.search(/\bCodeMirror-focused\b/)==-1){ba.className+=" CodeMirror-focused";}J();}function at(){if(i&&aX.onBlur){aX.onBlur(bt);}clearInterval(Y);aR=null;i=false;ba.className=ba.className.replace(" CodeMirror-focused","");}function a3(bO,bN,bL,bI,bH){if(aP){var bJ=[];for(var bK=bO.line,bM=bN.line+1;bK<bM;++bK){bJ.push(bw[bK].text);}aP.addChange(bO.line,bL.length,bJ);while(aP.done.length>aX.undoDepth){aP.done.shift();}}L(bO,bN,bL,bI,bH);}function aG(bN,bM){var bL=bN.pop();if(bL){var bJ=[],bH=bL.start+bL.added;for(var bI=bL.start;bI<bH;++bI){bJ.push(bw[bI].text);}bM.push({start:bL.start,added:bL.old.length,old:bJ});var bK=aa({line:bL.start+bL.old.length-1,ch:k(bJ[bJ.length-1],bL.old[bL.old.length-1])});L({line:bL.start,ch:0},{line:bH-1,ch:bw[bH-1].text.length},bL.old,bK,bK);}}function bj(){aG(aP.done,aP.undone);}function bF(){aG(aP.undone,aP.done);}function L(bT,bU,bP,bH,bI){var bR=bU.line-bT.line,bS=bw[bT.line],bV=bw[bU.line];if(bS==bV){if(bP.length==1){bS.replace(bT.ch,bU.ch,bP[0]);}else{bV=bS.split(bU.ch,bP[bP.length-1]);var bO=[bT.line+1,bR];bS.replace(bT.ch,bS.text.length,bP[0]);for(var bN=1,bQ=bP.length-1;bN<bQ;++bN){bO.push(new z(bP[bN]));}bO.push(bV);bw.splice.apply(bw,bO);}}else{if(bP.length==1){bS.replace(bT.ch,bS.text.length,bP[0]+bV.text.slice(bU.ch));bw.splice(bT.line+1,bR);}else{var bO=[bT.line+1,bR-1];bS.replace(bT.ch,bS.text.length,bP[0]);bV.replace(0,bU.ch,bP[bP.length-1]);for(var bN=1,bQ=bP.length-1;bN<bQ;++bN){bO.push(new z(bP[bN]));}bw.splice.apply(bw,bO);}}var bM=[],bW=bP.length-bR-1;for(var bN=0,bL=aS.length;bN<bL;++bN){var bJ=aS[bN];if(bJ<bT.line){bM.push(bJ);}else{if(bJ>bU.line){bM.push(bJ+bW);}}}if(bP.length){bM.push(bT.line);}aS=bM;bB(100);bu.push({from:bT.line,to:bU.line+1,diff:bW});aA=true;function bK(bX){return bX<=Math.min(bU.line,bU.line+bW)?bX:bX+bW;}bg(bH,bI,bK(aF.from.line),bK(aF.to.line));aw.style.height=(bw.length*bv()+2*aT())+"px";}function a9(bI,bL,bK){bL=aa(bL);if(!bK){bK=bL;}else{bK=aa(bK);}bI=v(bI);function bJ(bO){if(m(bO,bL)){return bO;}if(!m(bK,bO)){return bH;}var bM=bO.line+bI.length-(bK.line-bL.line)-1;var bN=bO.ch;if(bO.line==bK.line){bN+=bI[bI.length-1].length-(bK.ch-(bK.line==bL.line?bL.ch:0));}return{line:bM,ch:bN};}var bH;bk(bI,bL,bK,function(bM){bH=bM;return{from:bJ(aF.from),to:bJ(aF.to)};});return bH;}function ac(bH,bI){bk(v(bH),aF.from,aF.to,function(bJ){if(bI=="end"){return{from:bJ,to:bJ};}else{if(bI=="start"){return{from:aF.from,to:aF.from};}else{return{from:aF.from,to:bJ};}}});}function bk(bK,bM,bL,bH){var bJ=bK.length==1?bK[0].length+bM.ch:bK[bK.length-1].length;var bI=bH({line:bM.line+bK.length-1,ch:bJ});a3(bM,bL,bK,bI.from,bI.to);}function aU(bM,bL){var bI=bM.line,bH=bL.line;if(bI==bH){return bw[bI].text.slice(bM.ch,bL.ch);}var bK=[bw[bI].text.slice(bM.ch)];for(var bJ=bI+1;bJ<bH;++bJ){bK.push(bw[bJ].text);}bK.push(bw[bH].text.slice(0,bL.ch));return bK.join("\n");}function bo(){return aU(aF.from,aF.to);}var aK=false;function bi(){if(aK){return;}ay.set(2000,function(){R();bq();if(i){bi();}aB();});}function br(bJ){var bH=false;aK=true;function bI(){R();var bK=bq();if(bK=="moved"&&bJ){t[bJ]=true;}if(!bK&&!bH){bH=true;ay.set(80,bI);}else{aK=false;bi();}aB();}ay.set(20,bI);}function bq(){var bN=false,bU=bC.value,bW=G(bC);if(!bW){return false;}var bN=P.text!=bU,bP=bh;var bO=bN||bW.start!=P.start||bW.end!=(bP?P.start:P.end);if(bh&&!bO&&aF.from.line==0&&aF.from.ch==0){bh=null;}else{if(!bO){return false;}}if(bN){aR=bh=null;if(aX.readOnly){a4=true;return"changed";}}function bL(b3,b1){var b2=0;for(;;){var b0=bU.indexOf("\n",b2);if(b0==-1||(bU.charAt(b0-1)=="\r"?b0-1:b0)>=b3){return{line:b1,ch:b3-b2};}++b1;b2=b0+1;}}var bV=bL(bW.start,P.from),bI=bL(bW.end,P.from);if(bP){bV=bW.start==bP.anchor?bI:bV;bI=aR?aF.to:bW.start==bP.anchor?bV:bI;if(!m(bV,bI)){bh=null;aF.inverted=false;var bZ=bV;bV=bI;bI=bZ;}}if(bV.line==bI.line&&bV.line==aF.from.line&&bV.line==aF.to.line&&!aR){a4=false;}if(bN){var bM=0,bK=bU.length,bX=Math.min(bK,P.text.length);var bY,bR=P.from,bJ=-1;while(bM<bX&&(bY=bU.charAt(bM))==P.text.charAt(bM)){++bM;if(bY=="\n"){bR++;bJ=bM;}}var bS=bJ>-1?bM-bJ:bM,bH=P.to-1,bQ=P.text.length;for(;;){bY=P.text.charAt(bQ);if(bY=="\n"){bH--;}if(bU.charAt(bK)!=bY){++bK;++bQ;break;}if(bQ<=bM||bK<=bM){break;}--bK;--bQ;}var bJ=P.text.lastIndexOf("\n",bQ-1),bT=bJ==-1?bQ:bQ-bJ-1;a3({line:bR,ch:bS},{line:bH,ch:bT},v(bU.slice(bM,bK)),bV,bI);if(bR!=bH||bV.line!=bR){a4=true;}}else{bg(bV,bI);}P.text=bU;P.start=bW.start;P.end=bW.end;return bN?"changed":bO?"moved":false;}function au(){var bK=[];var bM=Math.max(0,aF.from.line-1),bL=Math.min(bw.length,aF.to.line+2);for(var bJ=bM;bJ<bL;++bJ){bK.push(bw[bJ].text);}bK=bC.value=bK.join(h);var bI=aF.from.ch,bH=aF.to.ch;for(var bJ=bM;bJ<aF.from.line;++bJ){bI+=h.length+bw[bJ].text.length;}for(var bJ=bM;bJ<aF.to.line;++bJ){bH+=h.length+bw[bJ].text.length;}P={text:bK,from:bM,to:bL,start:bI,end:bH};f(bC,bI,bh?bI:bH);}function aI(){var bH=be(aF.inverted?aF.from:aF.to);return bG(bH.x,bH.y,bH.x,bH.yBot);}function bG(bJ,bN,bH,bM){var bL=a7(),bS=aT();bN+=bS;bM+=bS;bJ+=bL;bH+=bL;var bP=ba.clientHeight,bK=ba.scrollTop,bI=false,bR=true;if(bN<bK){ba.scrollTop=Math.max(0,bN-10);bI=true;}else{if(bM>bK+bP){ba.scrollTop=bM+10-bP;bI=true;}}var bO=ba.clientWidth,bQ=ba.scrollLeft;if(bJ<bQ){ba.scrollLeft=Math.max(0,bJ-10);bI=true;}else{if(bH>bO+bQ){ba.scrollLeft=bH+10-bO;bI=true;if(bH>aw.clientWidth){bR=false;}}}if(bI&&aX.onScroll){aX.onScroll(bt);}return bR;}function by(){var bH=bv(),bI=ba.scrollTop-aT();return{from:Math.min(bw.length,Math.max(0,Math.floor(bI/bH))),to:Math.min(bw.length,Math.ceil((bI+ba.clientHeight)/bH))};}function X(bZ){if(!ba.clientWidth){a1=bf=0;return;}var bY=bZ===true?[]:[{from:a1,to:bf,domStart:0}];for(var bX=0,bT=bZ.length||0;bX<bT;++bX){var bN=bZ[bX],bL=[],bO=bN.diff||0;for(var bW=0,bU=bY.length;bW<bU;++bW){var bQ=bY[bW];if(bN.to<=bQ.from){bL.push({from:bQ.from+bO,to:bQ.to+bO,domStart:bQ.domStart});}else{if(bQ.to<=bN.from){bL.push(bQ);}else{if(bN.from>bQ.from){bL.push({from:bQ.from,to:bN.from,domStart:bQ.domStart});}if(bN.to<bQ.to){bL.push({from:bN.to+bO,to:bQ.to+bO,domStart:bQ.domStart+(bN.to-bQ.from)});}}}}bY=bL;}var bI=by();var bV=Math.min(a1,Math.max(bI.from-3,0)),bH=Math.min(bw.length,Math.max(bf,bI.to+3)),bM=[],bP=0,bK=bf-a1,bJ=bV,bS=0;for(var bX=0,bT=bY.length;bX<bT;++bX){var bQ=bY[bX];if(bQ.to<=bV){continue;}if(bQ.from>=bH){break;}if(bQ.domStart>bP||bQ.from>bJ){bM.push({from:bJ,to:bQ.from,domSize:bQ.domStart-bP,domStart:bP});bS+=bQ.from-bJ;}bJ=bQ.to;bP=bQ.domStart+(bQ.to-bQ.from);}if(bP!=bK||bJ!=bH){bS+=Math.abs(bH-bJ);bM.push({from:bJ,to:bH,domSize:bK-bP,domStart:bP});}if(!bM.length){return;}Z.style.display="none";if(bS>(bI.to-bI.from)*0.3){aM(bV=Math.max(bI.from-10,0),bH=Math.min(bI.to+7,bw.length));}else{S(bM);}Z.style.display="";var bR=bV!=a1||bH!=bf||bm!=ba.clientHeight;a1=bV;bf=bH;a6.style.top=(bV*bv())+"px";if(bR){bm=ba.clientHeight;aw.style.height=(bw.length*bv()+2*aT())+"px";Q();}if(Z.childNodes.length!=bf-a1){throw new Error("BAD PATCH! "+JSON.stringify(bM)+" size="+(bf-a1)+" nodes="+Z.childNodes.length);}bn();}function aM(bO,bN){var bK=[],bM={line:bO,ch:0},bL=m(aF.from,bM)&&!m(aF.to,bM);for(var bJ=bO;bJ<bN;++bJ){var bI=null,bH=null;if(bL){bI=0;if(aF.to.line==bJ){bL=false;bH=aF.to.ch;}}else{if(aF.from.line==bJ){if(aF.to.line==bJ){bI=aF.from.ch;bH=aF.to.ch;}else{bL=true;bI=aF.from.ch;}}}bK.push(bw[bJ].getHTML(bI,bH,true));}Z.innerHTML=bK.join("");}function S(bT){var bU=aF.from.line,bV=aF.to.line,bJ=0,bR=F&&document.createElement("div");for(var bP=0,bQ=bT.length;bP<bQ;++bP){var bM=bT[bP];var bL=(bM.to-bM.from)-bM.domSize;var bS=Z.childNodes[bM.domStart+bM.domSize+bJ]||null;if(F){for(var bO=Math.max(-bL,bM.domSize);bO>0;--bO){Z.removeChild(bS?bS.previousSibling:Z.lastChild);}}else{if(bL){for(var bO=Math.max(0,bL);bO>0;--bO){Z.insertBefore(document.createElement("pre"),bS);}for(var bO=Math.max(0,-bL);bO>0;--bO){Z.removeChild(bS?bS.previousSibling:Z.lastChild);}}}var bK=Z.childNodes[bM.domStart+bJ],bN=bU<bM.from&&bV>=bM.from;for(var bO=bM.from;bO<bM.to;++bO){var bI=null,bH=null;if(bN){bI=0;if(bV==bO){bN=false;bH=aF.to.ch;}}else{if(bU==bO){if(bV==bO){bI=aF.from.ch;bH=aF.to.ch;}else{bN=true;bI=aF.from.ch;}}}if(F){bR.innerHTML=bw[bO].getHTML(bI,bH,true);Z.insertBefore(bR.firstChild,bS);}else{bK.innerHTML=bw[bO].getHTML(bI,bH,false);bK.className=bw[bO].className||"";bK=bK.nextSibling;}}bJ+=bL;}}function Q(){if(!aX.gutter&&!aX.lineNumbers){return;}var bJ=a6.offsetHeight,bQ=ba.clientHeight;aE.style.height=(bJ-bQ<2?bQ:bJ)+"px";var bO=[];for(var bM=a1;bM<bf;++bM){var bN=bw[bM].gutterMarker;var bP=aX.lineNumbers?bM+aX.firstLineNumber:null;if(bN&&bN.text){bP=bN.text.replace("%N%",bP!=null?bP:"");}else{if(bP==null){bP="\u00a0";}}bO.push((bN&&bN.style?'<pre class="'+bN.style+'">':"<pre>"),bP,"</pre>");}aE.style.display="none";bA.innerHTML=bO.join("");var bL=String(bw.length).length,bH=bA.firstChild,bI=a(bH),bK="";while(bI.length+bK.length<bL){bK+="\u00a0";}if(bK){bH.insertBefore(document.createTextNode(bK),bH.firstChild);}aE.style.display="";az.style.marginLeft=aE.offsetWidth+"px";}function bn(){var bI=aF.inverted?aF.from:aF.to;var bH=M(bI.line,bI.ch)+"px",bJ=(bI.line-a1)*bv()+"px";bE.style.top=bJ;bE.style.left=bH;if(n(aF.from,aF.to)){W.style.top=bJ;W.style.left=bH;W.style.display="";}else{W.style.display="none";}}function bg(bO,bN,bI,bL){if(n(aF.from,bO)&&n(aF.to,bN)){return;}var bK=aR&&aa(aR);if(m(bN,bO)){var bJ=bN;bN=bO;bO=bJ;}if(bK){if(m(bK,bO)){bO=bK;}else{if(m(bN,bK)){bN=bK;}}}var bH=n(aF.to,bN),bM=n(aF.from,bO);if(n(bO,bN)){aF.inverted=false;}else{if(bH&&!bM){aF.inverted=true;}else{if(bM&&!bH){aF.inverted=false;}}}if(bI==null){bI=aF.from.line;bL=aF.to.line;}if(n(bO,bN)){if(!n(aF.from,aF.to)){bu.push({from:bI,to:bL+1});}}else{if(n(aF.from,aF.to)){bu.push({from:bO.line,to:bN.line+1});}else{if(!n(bO,aF.from)){if(bO.line<bI){bu.push({from:bO.line,to:Math.min(bN.line,bI)+1});}else{bu.push({from:bI,to:Math.min(bL,bO.line)+1});}}if(!n(bN,aF.to)){if(bN.line<bL){bu.push({from:Math.max(bI,bO.line),to:bL+1});}else{bu.push({from:Math.max(bO.line,bL),to:bN.line+1});}}}}aF.from=bO;aF.to=bN;ae=true;}function aH(bH,bI){var bJ=aa({line:bH,ch:bI||0});bg(bJ,bJ);}function aL(bH){return Math.max(0,Math.min(bH,bw.length-1));}function aa(bJ){if(bJ.line<0){return{line:0,ch:0};}if(bJ.line>=bw.length){return{line:bw.length-1,ch:bw[bw.length-1].text.length};}var bH=bJ.ch,bI=bw[bJ.line].text.length;if(bH==null||bH>bI){return{line:bJ.line,ch:bI};}else{if(bH<0){return{line:bJ.line,ch:0};}else{return bJ;}}}function bp(bJ){var bH=Math.floor(ba.clientHeight/bv()),bI=aF.inverted?aF.from:aF.to;aH(bI.line+(Math.max(bH-1,1)*(bJ?1:-1)),bI.ch);}function bz(bH){aH(bH?0:bw.length-1);}function bb(){var bH=bw.length-1;bg({line:0,ch:0},{line:bH,ch:bw[bH].text.length});}function a2(bK){var bI=bw[bK.line].text;var bJ=bK.ch,bH=bK.ch;while(bJ>0&&/\w/.test(bI.charAt(bJ-1))){--bJ;}while(bH<bI.length-1&&/\w/.test(bI.charAt(bH))){++bH;}bg({line:bK.line,ch:bJ},{line:bK.line,ch:bH});}function ar(){ac("\n","end");if(aX.enterMode!="flat"){al(aF.from.line,aX.enterMode=="keep"?"prev":"smart");}}function aq(bH){aR=null;switch(aX.tabMode){case"default":return false;case"indent":for(var bI=aF.from.line,bJ=aF.to.line;bI<=bJ;++bI){al(bI,"smart");}break;case"classic":if(n(aF.from,aF.to)){if(bH){al(aF.from.line,"smart");}else{ac("\t","end");}break;}case"shift":for(var bI=aF.from.line,bJ=aF.to.line;bI<=bJ;++bI){al(bI,bH?"subtract":"add");}break;}return true;}function al(bJ,bQ){if(bQ=="smart"){if(!aZ.indent){bQ="prev";}else{var bH=ax(bJ);}}var bR=bw[bJ],bL=bR.indentation(),bI=bR.text.match(/^\s*/)[0],bN;if(bQ=="prev"){if(bJ){bN=bw[bJ-1].indentation();}else{bN=0;}}else{if(bQ=="smart"){bN=aZ.indent(bH,bR.text.slice(bI.length));}else{if(bQ=="add"){bN=bL+aX.indentUnit;}else{if(bQ=="subtract"){bN=bL-aX.indentUnit;}}}}bN=Math.max(0,bN);var bP=bN-bL;if(!bP){if(aF.from.line!=bJ&&aF.to.line!=bJ){return;}var bO=bI;}else{var bO="",bM=0;if(aX.indentWithTabs){for(var bK=Math.floor(bN/u);bK;--bK){bM+=u;bO+="\t";}}while(bM<bN){++bM;bO+=" ";}}a9(bO,{line:bJ,ch:0},{line:bJ,ch:bI.length});}function a8(){aZ=y.getMode(aX,aX.mode);for(var bI=0,bH=bw.length;bI<bH;++bI){bw[bI].stateAfter=null;}aS=[0];}function K(){var bH=aX.gutter||aX.lineNumbers;aE.style.display=bH?"":"none";if(bH){Q();}else{Z.parentNode.style.marginLeft=0;}}function N(bN,bM,bJ){bN=aa(bN);bM=aa(bM);var bH=[];function bL(bO,bS,bR,bP){var bO=bw[bO],bQ=bO.addMark(bS,bR,bP);bQ.line=bO;bH.push(bQ);}if(bN.line==bM.line){bL(bN.line,bN.ch,bM.ch,bJ);}else{bL(bN.line,bN.ch,null,bJ);for(var bI=bN.line+1,bK=bM.line;bI<bK;++bI){bL(bI,0,null,bJ);}bL(bM.line,0,bM.ch,bJ);}bu.push({from:bN.line,to:bM.line+1});return function(){var bS,bO;for(var bP=0;bP<bH.length;++bP){var bR=bH[bP],bQ=d(bw,bR.line);bR.line.removeMark(bR);if(bQ>-1){if(bS==null){bS=bQ;}bO=bQ;}}if(bS!=null){bu.push({from:bS,to:bO+1});}};}function af(bH,bJ,bI){if(typeof bH=="number"){bH=bw[aL(bH)];}bH.gutterMarker={text:bJ,style:bI};Q();return bH;}function V(bH){if(typeof bH=="number"){bH=bw[aL(bH)];}bH.gutterMarker=null;Q();}function aC(bH,bI){if(typeof bH=="number"){var bJ=bH;bH=bw[aL(bH)];}else{var bJ=d(bw,bH);if(bJ==-1){return null;}}bH.className=bI;bu.push({from:bJ,to:bJ+1});return bH;}function T(bI){if(typeof bI=="number"){var bJ=bI;bI=bw[bI];if(!bI){return null;}}else{var bJ=d(bw,bI);if(bJ==-1){return null;}}var bH=bI.gutterMarker;return{line:bJ,text:bI.text,markerText:bH&&bH.text,markerClass:bH&&bH.style};}function M(bI,bL){var bK=bw[bI].text,bJ=ao.firstChild;if(bK.lastIndexOf("\t",bL)==-1){return bL*ah();}var bH=bJ.firstChild.nodeValue;try{bJ.firstChild.nodeValue=bK.slice(0,bL);return bJ.offsetWidth;}finally{bJ.firstChild.nodeValue=bH;}}function aW(bT,bO){var bR=bw[bT].text,bK=ah();if(bO<=0){return 0;}if(bR.indexOf("\t")==-1){return Math.min(bR.length,Math.round(bO/bK));}var bJ=ao.firstChild,bL=bJ.firstChild,bI=bL.nodeValue;try{bL.nodeValue=bR;var bQ=0,bN=0,bP=bR.length,bM=bJ.offsetWidth;if(bO>bM){return bP;}for(;;){if(bP-bQ<=1){return(bM-bO>bO-bN)?bQ:bP;}var bS=Math.ceil((bQ+bP)/2);bL.nodeValue=bR.slice(0,bS);var bH=bJ.offsetWidth;if(bH>bO){bP=bS;bM=bH;}else{bQ=bS;bN=bH;}}}finally{bL.nodeValue=bI;}}function be(bK,bJ){var bI=bv(),bH=bK.line-(bJ?a1:0);return{x:M(bK.line,bK.ch),y:bH*bI,yBot:(bH+1)*bI};}function bd(bJ){var bH=be(bJ,true),bI=A(az);return{x:bI.left+bH.x,y:bI.top+bH.y,yBot:bI.top+bH.yBot};}function bv(){var bH=Z.childNodes.length;if(bH){return Z.offsetHeight/bH;}else{return ao.firstChild.offsetHeight||1;}}function ah(){return(ao.firstChild.offsetWidth||320)/40;}function aT(){return az.offsetTop;}function a7(){return az.offsetLeft;}function U(bK,bJ){var bL=A(az),bH=bK.pageX()-bL.left,bN=bK.pageY()-bL.top;if(!bJ&&bK.target()!=az.parentNode&&!(bK.target()==ba&&bN>(bw.length*bv()))){for(var bM=bK.target();bM!=Z&&bM!=W;bM=bM.parentNode){if(!bM||bM==ba){return null;}}}var bI=a1+Math.floor(bN/bv());return aa({line:bI,ch:aW(aL(bI),bH)});}function ag(bH){var bK=U(bH);if(!bK||window.opera){return;}if(n(aF.from,aF.to)||m(bK,aF.from)||!m(bK,aF.to)){aH(bK.line,bK.ch);}var bJ=bC.style.cssText;bC.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(bH.pageY()-1)+"px; left: "+(bH.pageX()-1)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden;";var bI=bC.value=bo();bC.focus();f(bC,0,bI.length);if(o){bH.stop();}bs=true;setTimeout(function(){if(bC.value!=bI){bx(ac)(bC.value,"end");}bC.style.cssText=bJ;bs=false;au();bi();},50);}function J(){clearInterval(Y);var bH=true;W.style.visibility="";Y=setInterval(function(){W.style.visibility=(bH=!bH)?"":"hidden";},650);}var bD={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function ak(bN){var bH=aF.inverted?aF.from:aF.to,bP=bw[bH.line],bI=bH.ch-1;var bM=(bI>=0&&bD[bP.text.charAt(bI)])||bD[bP.text.charAt(++bI)];if(!bM){return;}var bQ=bM.charAt(0),bO=bM.charAt(1)==">",b0=bO?1:-1,bV=bP.styles;for(var b1=bI+1,bX=0,bZ=bV.length;bX<bZ;bX+=2){if((b1-=bV[bX].length)<=0){var bY=bV[bX+1];break;}}var bK=[bP.text.charAt(bI)],bU=/[(){}[\]]/;function bS(cd,b8,b9){if(!cd.text){return;}var cc=cd.styles,b7=bO?0:cd.text.length-1,ca;for(var b4=bO?0:cc.length-2,b6=bO?cc.length:-2;b4!=b6;b4+=2*b0){var cb=cc[b4];if(cc[b4+1]!=null&&cc[b4+1]!=bY){b7+=b0*cb.length;continue;}for(var b3=bO?0:cb.length-1,b2=bO?cb.length:-1;b3!=b2;b3+=b0,b7+=b0){if(b7>=b8&&b7<b9&&bU.test(ca=cb.charAt(b3))){var b5=bD[ca];if(b5.charAt(1)==">"==bO){bK.push(ca);}else{if(bK.pop()!=b5.charAt(0)){return{pos:b7,match:false};}else{if(!bK.length){return{pos:b7,match:true};}}}}}}}for(var bX=bH.line,bZ=bO?Math.min(bX+50,bw.length):Math.max(0,bX-50);bX!=bZ;bX+=b0){var bP=bw[bX],bL=bX==bH.line;var bR=bS(bP,bL&&bO?bI+1:0,bL&&!bO?bI:bP.text.length);if(bR){var bY=bR.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var bW=N({line:bH.line,ch:bI},{line:bH.line,ch:bI+1},bY),bJ=N({line:bX,ch:bR.pos},{line:bX,ch:bR.pos+1},bY);var bT=bx(function(){bW();bJ();});if(bN){setTimeout(bT,800);}else{bl=bT;}break;}}}function aN(bN){var bM,bJ;for(var bI=bN,bK=bN-40;bI>bK;--bI){if(bI==0){return 0;}var bH=bw[bI-1];if(bH.stateAfter){return bI;}var bL=bH.indentation();if(bJ==null||bM>bL){bJ=bI;bM=bL;}}return bJ;}function ax(bL){var bK=aN(bL),bJ=bK&&bw[bK-1].stateAfter;if(!bJ){bJ=g(aZ);}else{bJ=x(aZ,bJ);}for(var bI=bK;bI<bL;++bI){var bH=bw[bI];bH.highlight(aZ,bJ);bH.stateAfter=x(aZ,bJ);}if(!bw[bL].stateAfter){aS.push(bL);}return bJ;}function aQ(){var bL=+new Date+aX.workTime;while(aS.length){if(!bw[a1].stateAfter){var bJ=a1;}else{var bJ=aS.pop();}if(bJ>=bw.length){continue;}var bI=aN(bJ),bH=bI&&bw[bI-1].stateAfter;if(bH){bH=x(aZ,bH);}else{bH=g(aZ);}for(var bO=bI,bK=bw.length;bO<bK;++bO){var bP=bw[bO],bM=bP.stateAfter;if(+new Date>bL){aS.push(bO);bB(aX.workDelay);bu.push({from:bJ,to:bO});return;}var bN=bP.highlight(aZ,bH);bP.stateAfter=x(aZ,bH);if(bM&&!bN&&bP.text){break;}}bu.push({from:bJ,to:bO});}}function bB(bH){if(!aS.length){return;}ai.set(bH,bx(aQ));}function R(){a4=null;bu=[];aA=ae=false;}function aB(){var bH=false;if(ae){bH=!aI();}if(bu.length){X(bu);}else{if(ae){bn();}}if(bH){aI();}if(ae){J();}if(!bs&&(a4===true||(a4!==false&&ae))){au();}if(ae&&aX.onCursorActivity){aX.onCursorActivity(bt);}if(aA&&aX.onChange){aX.onChange(bt);}if(ae&&aX.matchBrackets){setTimeout(bx(function(){if(bl){bl();bl=null;}ak(false);}),20);}}var an=0;function bx(bH){return function(){if(!an++){R();}try{var bI=bH.apply(this,arguments);}finally{if(!--an){aB();}}return bI;};}function ap(bJ,bL,bI){this.atOccurrence=false;if(bI==null){bI=typeof bJ=="string"&&bJ==bJ.toLowerCase();}if(bL&&typeof bL=="object"){bL=aa(bL);}else{bL={line:0,ch:0};}this.pos={from:bL,to:bL};if(typeof bJ!="string"){this.matches=function(bO,bS){if(bO){var bM=bw[bS.line].text.slice(0,bS.ch),bN=bM.match(bJ),bR=0;while(bN){var bP=bM.indexOf(bN[0]);bR+=bP;bM=bM.slice(bP+1);var bQ=bM.match(bJ);if(bQ){bN=bQ;}else{break;}}}else{var bM=bw[bS.line].text.slice(bS.ch),bN=bM.match(bJ),bR=bN&&bS.ch+bM.indexOf(bN[0]);}if(bN){return{from:{line:bS.line,ch:bR},to:{line:bS.line,ch:bR+bN[0].length},match:bN};}};}else{if(bI){bJ=bJ.toLowerCase();}var bH=bI?function(bM){return bM.toLowerCase();}:function(bM){return bM;};var bK=bJ.split("\n");if(bK.length==1){this.matches=function(bP,bQ){var bN=bH(bw[bQ.line].text),bM=bJ.length,bO;if(bP?(bQ.ch>=bM&&(bO=bN.lastIndexOf(bJ,bQ.ch-bM))!=-1):(bO=bN.indexOf(bJ,bQ.ch))!=-1){return{from:{line:bQ.line,ch:bO},to:{line:bQ.line,ch:bO+bM}};}};}else{this.matches=function(bR,bT){var bS=bT.line,bU=(bR?bK.length-1:0),bP=bK[bU],bV=bH(bw[bS].text);var bQ=(bR?bV.indexOf(bP)+bP.length:bV.lastIndexOf(bP));if(bR?bQ>=bT.ch||bQ!=bP.length:bQ<=bT.ch||bQ!=bV.length-bP.length){return;}for(;;){if(bR?!bS:bS==bw.length-1){return;}bV=bH(bw[bS+=bR?-1:1].text);bP=bK[bR?--bU:++bU];if(bU>0&&bU<bK.length-1){if(bV!=bP){return;}else{continue;}}var bO=(bR?bV.lastIndexOf(bP):bV.indexOf(bP)+bP.length);if(bR?bO!=bV.length-bP.length:bO!=bP.length){return;}var bM={line:bT.line,ch:bQ},bN={line:bS,ch:bO};return{from:bR?bN:bM,to:bR?bM:bN};}};}}}ap.prototype={findNext:function(){return this.find(false);},findPrevious:function(){return this.find(true);},find:function(bI){var bH=this,bK=aa(bI?this.pos.from:this.pos.to);function bJ(bL){var bM={line:bL,ch:0};bH.pos={from:bM,to:bM};bH.atOccurrence=false;return false;}for(;;){if(this.pos=this.matches(bI,bK)){this.atOccurrence=true;return this.pos.match||true;}if(bI){if(!bK.line){return bJ(0);}bK={line:bK.line-1,ch:bw[bK.line-1].text.length};}else{if(bK.line==bw.length-1){return bJ(bw.length);}bK={line:bK.line+1,ch:0};}}},from:function(){if(this.atOccurrence){return q(this.pos.from);}},to:function(){if(this.atOccurrence){return q(this.pos.to);}}};return bt;}y.defaults={value:"",mode:null,indentUnit:2,indentWithTabs:false,tabMode:"classic",enterMode:"indent",electricChars:true,onKeyEvent:null,lineNumbers:false,gutter:false,firstLineNumber:1,readOnly:false,onChange:null,onCursorActivity:null,onGutterClick:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,workTime:100,workDelay:200,undoDepth:40,tabindex:null};var b={},r={};y.defineMode=function(i,I){if(!y.defaults.mode&&i!="null"){y.defaults.mode=i;}b[i]=I;};y.defineMIME=function(I,i){r[I]=i;};y.getMode=function(J,i){if(typeof i=="string"&&r.hasOwnProperty(i)){i=r[i];}if(typeof i=="string"){var L=i,I={};}else{var L=i.name,I=i;}var K=b[L];if(!K){if(window.console){console.warn("No mode "+L+" found, falling back to plain text.");}return y.getMode(J,"text/plain");}return K(J,I);};y.listModes=function(){var I=[];for(var i in b){if(b.propertyIsEnumerable(i)){I.push(i);}}return I;};y.listMIMEs=function(){var I=[];for(var i in r){if(r.propertyIsEnumerable(i)){I.push(i);}}return I;};y.fromTextArea=function(I,K){if(!K){K={};}K.value=I.value;if(!K.tabindex&&I.tabindex){K.tabindex=I.tabindex;}function M(){I.value=i.getValue();}if(I.form){var L=e(I.form,"submit",M,true);if(typeof I.form.submit=="function"){var J=I.form.submit;function N(){M();I.form.submit=J;I.form.submit();I.form.submit=N;}I.form.submit=N;}}I.style.display="none";var i=y(function(O){I.parentNode.insertBefore(O,I.nextSibling);},K);i.save=M;i.toTextArea=function(){M();I.parentNode.removeChild(i.getWrapperElement());I.style.display="";if(I.form){L();if(typeof I.form.submit=="function"){I.form.submit=J;}}};return i;};function x(K,i){if(i===true){return i;}if(K.copyState){return K.copyState(i);}var J={};for(var L in i){var I=i[L];if(I instanceof Array){I=I.concat([]);}J[L]=I;}return J;}y.startState=g;function g(J,I,i){return J.startState?J.startState(I,i):true;}y.copyState=x;function w(i){this.pos=this.start=0;this.string=i;}w.prototype={eol:function(){return this.pos>=this.string.length;},sol:function(){return this.pos==0;},peek:function(){return this.string.charAt(this.pos);},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++);}},eat:function(i){var J=this.string.charAt(this.pos);if(typeof i=="string"){var I=J==i;}else{var I=J&&(i.test?i.test(J):i(J));}if(I){++this.pos;return J;}},eatWhile:function(i){var I=this.start;while(this.eat(i)){}return this.pos>I;},eatSpace:function(){var i=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos;}return this.pos>i;},skipToEnd:function(){this.pos=this.string.length;},skipTo:function(i){var I=this.string.indexOf(i,this.pos);if(I>-1){this.pos=I;return true;}},backUp:function(i){this.pos-=i;},column:function(){return C(this.string,this.start);},indentation:function(){return C(this.string);},match:function(K,I,i){if(typeof K=="string"){function L(M){return i?M.toLowerCase():M;}if(L(this.string).indexOf(L(K),this.pos)==this.pos){if(I!==false){this.pos+=K.length;}return true;}}else{var J=this.string.slice(this.pos).match(K);if(J&&I!==false){this.pos+=J[0].length;}return J;}},current:function(){return this.string.slice(this.start,this.pos);}};function z(I,i){this.styles=i||[I,null];this.stateAfter=null;this.text=I;this.marked=this.gutterMarker=this.className=null;}z.prototype={replace:function(N,O,R){var S=[],L=this.marked;E(0,N,this.styles,S);if(R){S.push(R,null);}E(O,this.text.length,this.styles,S);this.styles=S;this.text=this.text.slice(0,N)+R+this.text.slice(O);this.stateAfter=null;if(L){var P=R.length-(O-N),J=this.text.length;function M(i){return i<=Math.min(O,O+P)?i:i+P;}for(var K=0;K<L.length;++K){var I=L[K],Q=false;if(I.from>=J){Q=true;}else{I.from=M(I.from);if(I.to!=null){I.to=M(I.to);}}if(Q||I.from>=I.to){L.splice(K,1);K--;}}}},split:function(J,I){var i=[I,null];E(J,this.text.length,this.styles,i);return new z(I+this.text.slice(J),i);},addMark:function(L,K,I){var i=this.marked,J={from:L,to:K,style:I};if(this.marked==null){this.marked=[];}this.marked.push(J);this.marked.sort(function(N,M){return N.from-M.from;});return J;},removeMark:function(K){var I=this.marked;if(!I){return;}for(var J=0;J<I.length;++J){if(I[J]==K){I.splice(J,1);break;}}},highlight:function(N,K){var M=new w(this.text),i=this.styles,O=0,L=false;while(!M.eol()){var I=N.token(M,K);var J=this.text.slice(M.start,M.pos);M.start=M.pos;if(O&&i[O-1]==I){i[O-2]+=J;}else{if(J){if(!L&&i[O]!=J||i[O+1]!=I){L=true;}i[O++]=J;i[O++]=I;}}if(M.pos>5000){i[O++]=this.text.slice(M.pos);i[O++]=null;break;}}if(i.length!=O){i.length=O;L=true;}return L;},getTokenAt:function(M,K,J){var i=this.text,L=new w(i);while(L.pos<J&&!L.eol()){L.start=L.pos;var I=M.token(L,K);}return{start:L.start,end:L.pos,string:L.current(),className:I||null,state:K};},indentation:function(){return C(this.text);},getHTML:function(T,U,L){var O=[];if(L){O.push(this.className?'<pre class="'+this.className+'">':"<pre>");}function V(ad,i){if(!ad){return;}if(i){O.push('<span class="',i,'">',p(ad),"</span>");}else{O.push(p(ad));}}var S=this.styles,M=this.text,R=this.marked;if(T==U){T=null;}if(!M){V(" ",T!=null&&U==null?"CodeMirror-selected":null);}else{if(!R&&T==null){for(var W=0,Y=S.length;W<Y;W+=2){V(S[W],S[W+1]);}}else{var K=0,W=0,Q="",X,ab=0;var Z=-1,N=null;function aa(){if(R){Z+=1;N=(Z<R.length)?R[Z]:null;}}aa();while(K<M.length){var P=M.length;var ac="";if(T!=null){if(T>K){P=T;}else{if(U==null||U>K){ac=" CodeMirror-selected";if(U!=null){P=Math.min(P,U);}}}}while(N&&N.to!=null&&N.to<=K){aa();}if(N){if(N.from>K){P=Math.min(P,N.from);}else{ac+=" "+N.style;if(N.to!=null){P=Math.min(P,N.to);}}}for(;;){var J=K+Q.length;var I=X;if(ac){I=X?X+ac:ac;}V(J>P?Q.slice(0,P-K):Q,I);if(J>=P){Q=Q.slice(P-K);K=P;break;}K=J;Q=S[W++];X=S[W++];}}if(T!=null&&U==null){V(" ","CodeMirror-selected");}}}if(L){O.push("</pre>");}return O.join("");}};function E(O,P,I,Q){for(var M=0,N=0,J=0;N<P;M+=2){var K=I[M],L=N+K.length;if(J==0){if(L>O){Q.push(K.slice(O-N,Math.min(K.length,P-N)),I[M+1]);}if(L>=O){J=1;}}else{if(J==1){if(L>P){Q.push(K.slice(0,P-N),I[M+1]);}else{Q.push(K,I[M+1]);}}}N=L;}}function c(){this.time=0;this.done=[];this.undone=[];}c.prototype={addChange:function(P,K,I){this.undone.length=0;var O=+new Date,M=this.done[this.done.length-1];if(O-this.time>400||!M||M.start>P+K||M.start+M.added<P-M.added+M.old.length){this.done.push({start:P,added:K,old:I});}else{var L=0;if(P<M.start){for(var J=M.start-P-1;J>=0;--J){M.old.unshift(I[J]);}M.added+=M.start-P;M.start=P;}else{if(M.start<P){L=P-M.start;K+=L;}}for(var J=M.added-L,N=I.length;J<N;++J){M.old.push(I[J]);}if(M.added<K){M.added=K;}}this.time=O;}};function D(){if(this.preventDefault){this.preventDefault();this.stopPropagation();}else{this.returnValue=false;this.cancelBubble=true;}}function s(i){if(!i.stop){i.stop=D;}return i;}function H(i){this.e=i;}H.prototype={stop:function(){D.call(this.e);},target:function(){return this.e.target||this.e.srcElement;},button:function(){if(this.e.which){return this.e.which;}else{if(this.e.button&1){return 1;}else{if(this.e.button&2){return 3;}else{if(this.e.button&4){return 2;}}}}},pageX:function(){if(this.e.pageX!=null){return this.e.pageX;}else{return this.e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;}},pageY:function(){if(this.e.pageY!=null){return this.e.pageY;}else{return this.e.clientY+document.body.scrollTop+document.documentElement.scrollTop;}}};function e(K,J,I,i){function L(M){I(new H(M||window.event));}if(typeof K.addEventListener=="function"){K.addEventListener(J,L,false);if(i){return function(){K.removeEventListener(J,L,false);};}}else{K.attachEvent("on"+J,L);if(i){return function(){K.detachEvent("on"+J,L);};}}}function l(){this.id=null;}l.prototype={set:function(i,I){clearTimeout(this.id);this.id=setTimeout(I,i);}};var F=(function(){var i=document.createElement("pre");i.innerHTML=" ";return !i.innerHTML;})();var o=/gecko\/\d{7}/i.test(navigator.userAgent);var h="\n";(function(){var i=document.createElement("textarea");i.value="foo\nbar";if(i.value.indexOf("\r")>-1){h="\r\n";}}());var u=8;var j=/Mac/.test(navigator.platform);var t={};for(var B=35;B<=40;++B){t[B]=t["c"+B]=true;}function C(J,I){if(I==null){I=J.search(/[^\s\u00a0]/);if(I==-1){I=J.length;}}for(var K=0,L=0;K<I;++K){if(J.charAt(K)=="\t"){L+=u-(L%u);}else{++L;}}return L;}function A(J){var i=0,L=0,I=J;for(var K=J;K;K=K.offsetParent){i+=K.offsetLeft;L+=K.offsetTop;}for(var K=J;K!=document.body;K=K.parentNode){i-=K.scrollLeft;L-=K.scrollTop;}return{left:i,top:L};}function a(i){return i.textContent||i.innerText||i.nodeValue||"";}function n(I,i){return I.line==i.line&&I.ch==i.ch;}function m(I,i){return I.line<i.line||(I.line==i.line&&I.ch<i.ch);}function q(i){return{line:i.line,ch:i.ch};}function p(i){return i.replace(/[<&]/g,function(I){return I=="&"?"&amp;":"&lt;";});}function k(L,K){if(!K){return L?L.length:0;}if(!L){return K.length;}for(var J=L.length,I=K.length;J>=0&&I>=0;--J,--I){if(L.charAt(J)!=K.charAt(I)){break;}}return I+1;}function d(L,I){if(L.indexOf){return L.indexOf(I);}for(var J=0,K=L.length;J<K;++J){if(L[J]==I){return J;}}return -1;}if("\n\nb".split(/\n/).length!=3){var v=function(J){var K=0,I,i=[];while((I=J.indexOf("\n",K))>-1){i.push(J.slice(K,J.charAt(I-1)=="\r"?I-1:I));K=I+1;}i.push(J.slice(K));return i;};}else{var v=function(i){return i.split(/\r?\n/);};}if(window.getSelection){var G=function(I){try{return{start:I.selectionStart,end:I.selectionEnd};}catch(i){return null;}};var f=function(J,K,i){try{J.setSelectionRange(K,i);}catch(I){}};}else{var G=function(K){try{var O=document.selection.createRange();}catch(Q){return null;}if(!O||O.parentElement()!=K){return null;}var J=K.value,P=J.length,R=K.createTextRange();R.moveToBookmark(O.getBookmark());var M=K.createTextRange();M.collapse(false);if(R.compareEndPoints("StartToEnd",M)>-1){return{start:P,end:P};}var I=-R.moveStart("character",-P);for(var N=J.indexOf("\r");N>-1&&N<I;N=J.indexOf("\r",N+1),I++){}if(R.compareEndPoints("EndToEnd",M)>-1){return{start:I,end:P};}var L=-R.moveEnd("character",-P);for(var N=J.indexOf("\r");N>-1&&N<L;N=J.indexOf("\r",N+1),L++){}return{start:I,end:L};};var f=function(M,O,J){var K=M.createTextRange();K.collapse(true);var I=K.duplicate();var L=0,i=M.value;for(var N=i.indexOf("\n");N>-1&&N<O;N=i.indexOf("\n",N+1)){++L;}K.move("character",O-L);for(;N>-1&&N<J;N=i.indexOf("\n",N+1)){++L;}I.move("character",J-L);K.setEndPoint("EndToEnd",I);K.select();};}y.defineMode("null",function(){return{token:function(i){i.skipToEnd();}};});y.defineMIME("text/plain","null");return y;})();